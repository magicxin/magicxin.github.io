webpackJsonp([15],{JrMx:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"emailDetail-wrap"},[e("div",[e("div",{staticClass:"emailDetail-top"},[e("h1",[t._v(t._s(t.email.mailTitle))]),t._v(" "),e("div",{staticClass:"emailDetail-send"},[e("span",[e("i",[t._v("发件人：")]),e("i",[t._v(t._s(t.email.senderUserName))])]),t._v(" "),t.attachUrlLength?e("span",{directives:[{name:"show",rawName:"v-show",value:t.attachHide,expression:"attachHide"}],staticClass:"attach",on:{click:t.goAttach}},[t._v(t._s(t.email.attachUrl.length))]):t._e(),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.onDetailsClick,expression:"onDetailsClick"}],staticClass:"fr",on:{click:t.onDetails}},[t._v("详情"),t._m(0)]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.offDetailsClick,expression:"offDetailsClick"}],staticClass:"fr",on:{click:t.offDetails}},[t._v("隐藏"),t._m(1)])]),t._v(" "),t.details?e("div",{staticClass:"emailDetail-send"},[e("span",[e("i",[t._v("收件人：")]),e("i",[t._v(t._s(t.email.to))])])]):t._e(),t._v(" "),t.details?e("div",{staticClass:"emailDetail-send"},[e("span",[e("i",[t._v("抄　送：")]),e("i",[t._v(t._s(t.email.cc))])])]):t._e(),t._v(" "),t.details?e("div",{staticClass:"emailDetail-send"},[e("span",[e("i",[t._v("时　间：")]),e("i",[t._v(t._s(t.email.senderTime))])])]):t._e(),t._v(" "),t.details?e("div",{directives:[{name:"show",rawName:"v-show",value:t.attachHide,expression:"attachHide"}],staticClass:"emailDetail-send"},[e("span",{staticClass:"attach",on:{click:t.goAttach}},[e("i",[t._v("附　件：")]),t._v(t._s(t.email.attachUrl.length))])]):t._e()]),t._v(" "),e("div",{staticClass:"emailDetail-content",style:{top:t.topHeight+"px"}},[e("div",{staticClass:"emaildetail-char2",domProps:{innerHTML:t._s(t.email.mailContent)}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.attachHide,expression:"attachHide"}],staticClass:"emaildetail-attach",attrs:{id:"attachList"}},[e("div",[t._v("附件：")]),t._v(" "),t._l(t.email.attachUrl,function(a){return e("p",[e("a",{attrs:{href:a.url}},[t._v(t._s(a.attachName))])])})],2)])]),t._v(" "),e("div",{staticClass:"box-bottom"},[e("mt-tabbar",[e("mt-tab-item",{staticClass:"pr",class:{selected:t.idReplyShow},attrs:{id:"回复"},nativeOn:{click:function(a){t.isShow()}}},[t._v("\n                    \t回复\n                    "),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.idReplyShow,expression:"idReplyShow"}],staticClass:"footerfirst-list"},[e("li",{on:{click:function(a){t.reply("all")}}},[t._v("全部回复")]),t._v(" "),e("li",{on:{click:function(a){t.reply()}}},[t._v("回复")]),t._v(" "),e("li",[t._v("取消")])])]),t._v(" "),e("mt-tab-item",{attrs:{id:"转发"},nativeOn:{click:function(a){t.transpond("repeat")}}},[t._v("\n                    \t转发\n                ")]),t._v(" "),e("mt-tab-item",{directives:[{name:"show",rawName:"v-show",value:t.starRtx,expression:"starRtx"}],staticClass:"addStarRtx",attrs:{id:"星标"},nativeOn:{click:function(a){t.addStarRtx()}}},[e("i",{staticClass:"jcm-xingbiao"}),t._v("星标\n                ")]),t._v(" "),e("mt-tab-item",{directives:[{name:"show",rawName:"v-show",value:!t.starRtx,expression:"!starRtx"}],staticClass:"deldelStarRtx",attrs:{id:"取消星标"},nativeOn:{click:function(a){t.delStarRtx()}}},[e("i",{staticClass:"jcm-biaoxing"}),t._v("取消星标\n                ")]),t._v(" "),e("mt-tab-item",{attrs:{id:"删除"},nativeOn:{click:function(a){t.sheetVisible=!0}}},[t._v("\n                  \t 删除\n                ")])],1)],1),t._v(" "),e("mt-actionsheet",{attrs:{actions:t.sheetData,cancelText:""},model:{value:t.sheetVisible,callback:function(a){t.sheetVisible=a},expression:"sheetVisible"}})],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b",[e("i",{staticClass:"jcm-xiajiantou"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b",[e("i",{staticClass:"jcm-xiajiantou_1"})])}],l={render:i,staticRenderFns:s};a.a=l},YR9J:function(t,a,e){"use strict";var i=e("mvHQ"),s=e.n(i),l=e("Au9i");e.n(l);a.a={name:"jc-emaildetail",beforeRouteEnter:function(t,a,e){e(function(t){t.getMailById(),t.attachHide=!0,t.idReplyShow=!1,t.onDetailsClick=!0,t.offDetailsClick=!1})},data:function(){return{email:{},attachUrlLength:!1,details:!1,onDetailsClick:!0,idReplyShow:!1,offDetailsClick:!1,starRtx:!0,attachHide:!0,emailData:{},sheetVisible:!1,sheetData:[{name:"确定删除?"},{name:"是",method:this.delMailRtx},{name:"否"}],topHeight:0}},methods:{getMailById:function(){var t=this;this.$route.params&&this.$route.query.id&&t.Api.MAIL.getMailById({id:t.$route.query.id,mailType:t.$route.query.selected,receiveType:t.$route.query.receiveType}).then(function(a){if("000000"===a.data.code)if(t.$set(t,"email",a.data.body),t.emailData=a.data.body,1==a.data.body.starMail?t.starRtx=!1:t.starRtx=!0,a.data.body.attachUrl.length){t.attachUrlLength=!0;for(var i=0;i<a.data.body.attachUrl.length;i++)a.data.body.attachUrl[i].url=t.Api.MAIL.attachUrl(a.data.body.attachUrl[i].url)}else t.attachHide=!1;else e.i(l.Toast)({message:a.data.errormsg});t.calcHeight()}).catch(function(t){})},reply:function(t){this.emailData.type=!0;var a=s()(this.emailData);window.sessionStorage.setItem("replyData",a),this.$router.push({path:"/compose",query:{plan:t}})},isShow:function(){this.idReplyShow=!this.idReplyShow},onDetails:function(){var t=this;t.details=!0,t.onDetailsClick=!1,t.offDetailsClick=!0,t.attachUrlLength=!1,t.calcHeight()},offDetails:function(){var t=this;t.details=!1,t.onDetailsClick=!0,t.offDetailsClick=!1,t.attachUrlLength=!0,t.calcHeight()},transpond:function(t){this.emailData.type=!0;var a=s()(this.emailData);window.sessionStorage.setItem("replyData",a),this.$router.push({path:"/compose",query:{repeat:t}})},addStarRtx:function(){var t=this;t.Api.MAIL.addStarRtx({mailId:t.emailData.id,receiveType:t.emailData.receiveType,mailType:t.$route.query.selected}).then(function(a){"000000"===a.data.code&&"1"===a.data.body?t.starRtx=!1:e.i(l.Toast)(a.data.errormsg)})},delStarRtx:function(){var t=this;t.Api.MAIL.delStarRtx({mailId:t.emailData.id,receiveType:t.emailData.receiveType,mailType:t.$route.query.selected}).then(function(a){"000000"===a.data.code&&"1"===a.data.body?t.starRtx=!0:e.i(l.Toast)(a.data.errormsg)})},delMailRtx:function(){var t=this;t.Api.MAIL.delMailRtx(t.emailData,"5"===t.$route.query.selected?1:0).then(function(a){"000000"===a.data.code?(e.i(l.Toast)("删除成功"),t.$router.replace({path:"/",query:{selected:t.$route.query.selected}})):e.i(l.Toast)(a.data.errormsg)})},goAttach:function(){document.querySelector("#attachList").scrollIntoView(!0)},calcHeight:function(){this.$nextTick(function(){this.topHeight=document.querySelector(".emailDetail-top").clientHeight})}}}},mvHQ:function(t,a,e){t.exports={default:e("qkKv"),__esModule:!0}},p9zP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("YR9J"),s=e("JrMx"),l=e("VU/8"),n=l(i.a,s.a,null,null,null);a.default=n.exports},qkKv:function(t,a,e){var i=e("FeBl"),s=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}}});
//# sourceMappingURL=15.cd6f29ac7f5bac1853d9.js.map