webpackJsonp([14],{CNqz:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"normal"},[n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.info.title))]),t._v(" "),n("span",[t._v(t._s(t.info.author_unit))]),t._v(" "),n("span",[t._v(t._s(t.info.author))]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t.paresDate(t.info.sendTime)))])]),t._v(" "),n("div",{staticClass:"journalism-content"},[t.info.picUrl?n("div",{staticClass:"info-img"},[n("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{alt:"",src:t.info.picUrl}})]):t._e(),t._v(" "),n("div",[n("div",{domProps:{innerHTML:t._s(t.noTableHtml1)}}),t._v(" "),n("div",{staticStyle:{"overflow-x":"scroll"},domProps:{innerHTML:t._s(t.tableHtml)}}),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.noTableHtml2)}})])]),t._v(" "),t.showAttach?n("div",{staticClass:"info-attach"},[n("div",[t._v("附件：")]),t._v(" "),t._l(t.info.attachUrlList,function(e){return n("p",{staticClass:"attach-list"},[n("a",{attrs:{href:e.url}},[t._v(t._s(e.attachName))])])})],2):t._e(),t._v(" "),t.showReview?n("div",{staticClass:"info-comment"},[n("h2",[t._v("评论（"),n("span",[t._v(t._s(t.reviewList.length))]),t._v("）")]),t._v(" "),t._l(t.reviewList,function(e){return n("div",{staticClass:"review-list clearfix"},[n("div",{staticClass:"info"},[n("p",[n("span",{staticClass:"user"},[t._v(t._s(e.reviewName))])]),t._v(" "),n("p",{staticClass:"review-content"},[t._v(t._s(e.reviewContent))]),t._v(" "),n("p",{staticClass:"date"},[n("span",[t._v(t._s(t.paresDate(e.reviewTime)))]),n("span",{staticClass:"time"},[t._v(t._s(t.parestimes(e.reviewTime)))])])])])}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],attrs:{placeholder:"评论"},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value)}}}),t._v(" "),n("div",{staticClass:"btn"},[n("input",{attrs:{type:"submit",value:"确定"},on:{click:function(e){e.stopPropagation(),t.comment(e)}}})])],2):t._e()])},i=[],a={render:s,staticRenderFns:i};e.a=a},KmfA:function(t,e,n){"use strict";var s=n("fZjL"),i=n.n(s),a=n("Au9i"),o=(n.n(a),n("TVG1"));e.a={beforeRouteEnter:function(t,e,n){n(function(t){t.getDetail()})},data:function(){return{info:{},showAttach:!1,showReview:!0,noTableHtml1:"",noTableHtml2:"",tableHtml:"",commentText:"",commentParams:{},reviewList:[]}},methods:{getDetail:function(){var t=this;t.showLoading(),this.$route.query&&this.$route.query.id&&t.Api.INFO.getInfoById({id:t.$route.query.id,nodeId:t.$route.query.nodeId,definitionId:t.$route.query.definitionId,instanceId:t.$route.query.instanceId,businessKey:t.$route.query.businessKey}).then(function(e){"000000"===e.data.code?(t.$set(t,"info",e.data.body),t.reviewList=i()(e.data.body.reviewList).map(function(t){return e.data.body.reviewList[t]}),t.info.attachUrlList.length&&(t.showAttach=!0)):n.i(a.Toast)({message:e.data.errormsg}),t.$nextTick(function(){t.settableWidth(),t.hideLoading()})}).catch(function(e){t.hideLoading()})},showLoading:function(){a.Indicator.open()},hideLoading:function(){a.Indicator.close()},paresDate:function(t){return o.a.format(new Date(t),"yyyy-MM-dd")},parestimes:function(t){return o.a.format(new Date(t),"hh:mm:ss")},comment:function(){var t=this;t.commentParams.reviewContent=this.commentText,t.Api.INFO.saveInfoComment({infoId:t.$route.query.id,reviewContent:t.commentParams.reviewContent}).then(function(e){"000000"===e.data.code?(n.i(a.Toast)({message:"评论成功"}),t.commentText="",t.getDetail()):n.i(a.Toast)({message:e.data.errormsg})})},settableWidth:function(){var t=this;if(-1!=t.info.infoContent.indexOf("<table>")){var e=t.info.infoContent.split("<td").length-1,n=t.info.infoContent.split("<tr").length-1,s=t.info.infoContent.split("table");s[0]=s[0].substring(0,s[0].length-1),s[2]=s[2].substr(1),t.noTableHtml1=s[0],t.noTableHtml2=s[2],t.tableHtml=e/n>4?'<table style="width:600px"'+s[1]+"table>":"<table"+s[1]+"table>"}else t.noTableHtml1=t.info.infoContent}}}},S9iK:function(t,e,n){"use strict";function s(t){n("Svr/")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("KmfA"),a=n("CNqz"),o=n("VU/8"),r=s,l=o(i.a,a.a,r,null,null);e.default=l.exports},"Svr/":function(t,e,n){var s=n("nA20");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("550575bd",s,!0)},TVG1:function(t,e,n){"use strict";function s(t,e,n){var s,i,a,o,r,l=function l(){var c=Date.now()-o;c<e&&c>=0?s=setTimeout(l,e-c):(s=null,n||(r=t.apply(a,i),s||(a=i=null)))};return function(){a=this,i=arguments,o=Date.now();var c=n&&!s;return s||(s=setTimeout(l,e)),c&&(r=t.apply(a,i),a=i=null),r}}function i(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in n)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return e}var a=n("Zrlr"),o=n.n(a),r=n("wxAW"),l=n.n(r),c=function(){function t(e){o()(this,t),this.listeners={},this.EVENT_TYPE_WORK_CALENDAR="event_type_work_calendar",this.EVENT_TYPE_FIELD_NAME="event_type_field_name",this.EVENT_TYPE_FIELD_END_NAME="EVENT_TYPE_FIELD_END_NAME"}return l()(t,[{key:"addEventListener",value:function(t,e,n){for(var s=[],i=arguments.length,a=0;a<i;a++)s.push(arguments[a]);s=s.length>3?s.splice(3,s.length-1):[],void 0!==this.listeners[t]?this.listeners[t].push({scope:n,callback:e,args:s}):this.listeners[t]=[{scope:n,callback:e,args:s}]}},{key:"removeEventListener",value:function(t,e,n){if(void 0!==this.listeners[t]){for(var s=this.listeners[t].length,i=[],a=0;a<s;a++){var o=this.listeners[t][a];o.scope==n&&o.callback==e||i.push(o)}this.listeners[t]=i}}},{key:"hasEventListener",value:function(t,e,n){if(void 0!==this.listeners[t]){var s=this.listeners[t].length;if(void 0===e&&void 0===n)return s>0;for(var i=0;i<s;i++){var a=this.listeners[t][i];if((!n||a.scope==n)&&a.callback==e)return!0}}return!1}},{key:"dispatch",value:function(t,e){for(var n={type:t,target:e},s=[],i=arguments.length,a=0;a<i;a++)s.push(arguments[a]);if(s=s.length>2?s.splice(2,s.length-1):[],s=[n].concat(s),void 0!==this.listeners[t])for(var o=this.listeners[t].slice(),r=o.length,a=0;a<r;a++){var l=o[a];if(l&&l.callback){var c=s.concat(l.args);l.callback.apply(l.scope,c)}}}},{key:"getEvents",value:function(){var t="";for(var e in this.listeners)for(var n=this.listeners[e].length,s=0;s<n;s++){var i=this.listeners[e][s];t+=i.scope&&i.scope.className?i.scope.className:"anonymous",t+=" listen for '"+e+"'\n"}return t}}]),t}();e.a={debounce:s,EventBus:new c,format:i}},nA20:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"detail.vue",sourceRoot:""}])}});
//# sourceMappingURL=14.785c087226415ac896ab.js.map