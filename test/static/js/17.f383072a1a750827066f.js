webpackJsonp([17],{"83sv":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position"},[n("div",{staticClass:"search",class:{panel:e.panelState},on:{click:e.togglePanel}},[n("form",{on:{submit:function(t){t.preventDefault(),e.doop(t)}}},[n("i",{staticClass:"mintui mintui-search"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"search",placeholder:"搜索"},domProps:{value:e.searchText},on:{focus:function(t){e.panelState=!0},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.onSubmit(t)},click:function(t){t.stopPropagation(),e.doop(t)},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),e._v(" "),n("a",{staticClass:"search-cancel",on:{click:e.hidePanel}},[e._v("取消")])]),e._v(" "),n("div",{ref:"listContainer",staticClass:"map-list",class:{searchPanel:e.searchText.length},attrs:{id:"listContainer"}},e._l(e.searchResults,function(t){return n("div",{key:t.id,on:{click:function(n){e.selectedCompany(t)}}},[n("mt-cell",{attrs:{title:t.name,label:t.address,"is-link":""}})],1)}))]),e._v(" "),n("div",{attrs:{id:"container"}}),e._v(" "),n("div",{ref:"listContainer",staticClass:"map-list",style:{height:e.listHeight+"px"}},e._l(e.positions,function(t){return n("div",{key:t.id,on:{click:function(n){e.selectedCompany(t)}}},[n("mt-cell",{attrs:{title:t.name,label:t.address}},[e.current.id==t.id?n("i",{staticClass:"selected jcm-check"}):e._e()])],1)}))])},a=[],s={render:i,staticRenderFns:a};t.a=s},Hs02:function(e,t,n){"use strict";var i=n("Dd8w"),a=n.n(i),s=n("Au9i"),o=(n.n(s),n("NYxO"));n("/ocq");t.a={activated:function(){this.searchResults=[]},data:function(){return{searchText:"",selected:"",listHeight:300,panelState:!1,searchResults:[]}},mounted:function(){var e=this;e.listHeight=document.documentElement.clientHeight-e.$refs.listContainer.getBoundingClientRect().top,window.AMap?(e.map=new AMap.Map("container",{resizeEnable:!0,zoom:13,center:[125.250554,43.79853]}),e.map.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0});e.map.addControl(t),t.getCurrentPosition(),AMap.event.addListener(t,"complete",e.onComplete),AMap.event.addListener(t,"error",e.onError)}),AMap.service("AMap.PlaceSearch",function(){e.placeSearch=new AMap.PlaceSearch({type:"公司企业",pageSize:16})})):n.i(s.Toast)("定位失败,请从新进入此页面!!!")},methods:{onComplete:function(e){this.lng=e.position.getLng(),this.lat=e.position.getLat()},onError:function(e){n.i(s.Toast)("定位失败,请从新进入此页面!!!")},searchCompany:function(){var e=this;e.placeSearch.searchNearBy(e.searchText,[e.lng,e.lat],300,function(t,n){"complete"===t&&"OK"===n.info&&(e.searchResults=n.poiList.pois)})},selectedCompany:function(e){this.$store.commit("updateCurrent",e),this.searchText="",this.panelState=!1,this.hidePanel()},onSubmit:function(){this.searchText&&this.searchCompany()},hidePanel:function(){if(0==this.panelState&&""==this.searchText)return void this.$router.go(-1);this.searchText="",this.panelState=!1,this.searchResults=[]},togglePanel:function(){this.panelState&&""==this.searchText&&(this.panelState=!1)},doop:function(){}},computed:a()({},n.i(o.c)(["positions","current"]))}},"RL+5":function(e,t,n){var i=n("wTry");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("5dd19234",i,!0)},tFej:function(e,t,n){"use strict";function i(e){n("RL+5")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Hs02"),s=n("83sv"),o=n("VU/8"),c=i,r=o(a.a,s.a,c,null,null);t.default=r.exports},wTry:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"position.vue",sourceRoot:""}])}});
//# sourceMappingURL=17.f383072a1a750827066f.js.map